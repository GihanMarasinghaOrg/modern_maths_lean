<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Expressions &mdash; Modern Mathematics with Lean</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/proof.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/proof.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/proof.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="_static/togglebutton.js"></script>
        <script src="_static/design-tabs.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Typing Lean symbols" href="typing_lean_symbols.html" />
    <link rel="prev" title="1. Introduction" href="01_Introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Modern Mathematics with Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01_Introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Expressions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#evaluating-expressions">2.1. Evaluating expressions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solutions">2.1.1. Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#types-in-lean">2.2. Types in Lean</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">2.2.1. Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-root-of-a-parse-tree-in-lean">2.3. The root of a parse tree in Lean</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">2.3.1. Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions-in-lean">2.4. Functions in Lean</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lambda-abstraction">2.4.1. Lambda abstraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#functions-and-variables">2.4.2. Functions and variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">2.4.3. Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#predicates">2.5. Predicates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">2.5.1. Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#introduction-to-tactics">2.6. Introduction to tactics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tactic-blocks">2.6.1. Tactic blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#who-s-sorry-now">2.6.2. Who&#8217;s sorry now?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">2.6.3. Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions-and-predicates-of-many-variables">2.7. Functions and predicates of many variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">2.7.1. Solutions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="typing_lean_symbols.html">Typing Lean symbols</a></li>
<li class="toctree-l1"><a class="reference internal" href="tactics.html">Tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="error_messages.html">Error messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Modern Mathematics with Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">2. </span>Expressions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/02_Expressions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="expressions">
<span id="id1"></span><h1><span class="section-number">2. </span>Expressions<a class="headerlink" href="#expressions" title="Permalink to this heading">&#61633;</a></h1>
<section id="evaluating-expressions">
<h2><span class="section-number">2.1. </span>Evaluating expressions<a class="headerlink" href="#evaluating-expressions" title="Permalink to this heading">&#61633;</a></h2>
<p>Lean can be used as a calculator to evaluate expressions.</p>
<div id="index-0" style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/evaluating_expressions.lean" id="index-0" target="_blank" tryitfile="../src/expressions/evaluating_expressions.lean">
Go to source</a></div><div class="highlight-lean notranslate" id="index-0"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">3</span>
</pre></div>
</div>
</div><p>The above code outputs <code class="docutils literal notranslate"><span class="pre">6</span></code> in the Infoview pane.</p>
<div class="proof proof-type-problem" id="id8">

    <div class="proof-title">
        <span class="proof-type">Problem 2.1</span>
        
    </div><div class="proof-content">
<p>Adapt the code above to evaluate expressions such as <span class="math notranslate nohighlight">\(1 + 2 + 3\)</span>, <span class="math notranslate nohighlight">\(7^4\)</span>,
<span class="math notranslate nohighlight">\(6 - 3\)</span>, <span class="math notranslate nohighlight">\(20/5\)</span>, <span class="math notranslate nohighlight">\(10 + 2 \times 5\)</span>.</p>
</div></div><p>Remember that to work with the code for this section, you just need
to click on the &#8216;Go to source&#8217; link in any code fragment.</p>
<p>You may add comments to your Lean code. Lean ignores any text within a comment.</p>
<div id="index-1" style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/evaluating_expressions.lean" id="index-1" target="_blank" tryitfile="../src/expressions/evaluating_expressions.lean">
Go to source</a></div><div class="highlight-lean notranslate" id="index-1"><div class="highlight"><pre><span></span><span class="c">/-</span>
<span class="cm">This is a block comment. It is ignored by Lean</span>
<span class="cm">-/</span>

<span class="k">#eval</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">2</span> <span class="c1">-- This line comment starts at the `--` and ends at the end of the line.</span>
</pre></div>
</div>
</div><section id="solutions">
<h3><span class="section-number">2.1.1. </span>Solutions<a class="headerlink" href="#solutions" title="Permalink to this heading">&#61633;</a></h3>
<p>This section has solutions.
<a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/solutions/solutions_evaluating_expressions.lean" target="_blank" tryitfile="../src/expressions/solutions/solutions_evaluating_expressions.lean">
Go to solutions source</a>.</p>
</section>
</section>
<section id="types-in-lean">
<h2><span class="section-number">2.2. </span>Types in Lean<a class="headerlink" href="#types-in-lean" title="Permalink to this heading">&#61633;</a></h2>
<p>Every expression in mathematics (and in Lean) has a <cite>type</cite>.</p>
<div id="index-2" style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/types.lean" id="index-2" target="_blank" tryitfile="../src/expressions/types.lean">
Go to source</a></div><div class="highlight-lean notranslate" id="index-2"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="mi">2</span>
</pre></div>
</div>
</div><p>The code above outputs <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">:</span> <span class="pre">&#8469;</span></code>, showing that <code class="docutils literal notranslate"><span class="pre">2</span></code> has type <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code>, the type
of natural numbers.</p>
<p>Numerals are treated as natural numbers by default. Consider the output
of the following code</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/types.lean" target="_blank" tryitfile="../src/expressions/types.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="mi">3</span> <span class="bp">-</span> <span class="mi">5</span>
</pre></div>
</div>
</div><p>Lean claims that <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">-</span> <span class="pre">5</span></code> is <code class="docutils literal notranslate"><span class="pre">0</span></code>.The reason is that subtraction of two
natural numbers (non-negative integers) in Lean always returns a natural number.
To deal with awkward situations like this, Lean defines <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-</span> <span class="pre">b</span></code> to be <code class="docutils literal notranslate"><span class="pre">0</span></code>
if <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> are natural numbers where <code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">&#8805;</span> <span class="pre">a</span></code>.</p>
<p>To get the expected answer, we must request that Lean treats these numerals
as integers.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/types.lean" target="_blank" tryitfile="../src/expressions/types.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="o">(</span><span class="mi">3</span> <span class="bp">-</span> <span class="mi">5</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">)</span>
</pre></div>
</div>
</div><p>To produce the <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> symbol, type <code class="docutils literal notranslate"><span class="pre">\Z</span></code> followed by a space or tab.
Alternatively, type <code class="docutils literal notranslate"><span class="pre">\int</span></code>. Likewise, <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> is typesd <code class="docutils literal notranslate"><span class="pre">\nat</span></code> or <code class="docutils literal notranslate"><span class="pre">\N</span></code>.</p>
<p>A full list of the Lean symbols used in this resource are shown
in the Appendix <a class="reference internal" href="typing_lean_symbols.html#typing-lean-symbols"><span class="std std-ref">Typing Lean Symbols</span></a>.</p>
<div class="dropdown admonition">
<p class="admonition-title">Read this if you can&#8217;t easily type <code class="docutils literal notranslate"><span class="pre">\</span></code></p>
<p>On some keyboards, it may be difficult to type <code class="docutils literal notranslate"><span class="pre">\</span></code>. You can change
this by opening the VSCode settings with Ctrl+, (or Cmd+, in Mac)
and searching for &#8216;Lean lnput leader&#8217;. Change the leader key to an
easier-to-type symbol. For example, if you change it to <code class="docutils literal notranslate"><span class="pre">!</span></code>, then typing
<code class="docutils literal notranslate"><span class="pre">!N</span></code> (followed by space) will produce <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code>.</p>
</div>
<p>You can evaluate the rational number <span class="math notranslate nohighlight">\(3.4^2\)</span> by typing:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/types.lean" target="_blank" tryitfile="../src/expressions/types.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="o">(</span><span class="mi">3</span><span class="bp">.</span><span class="mi">4</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">&#8474;</span><span class="o">)</span>
</pre></div>
</div>
</div><p>Here, <code class="docutils literal notranslate"><span class="pre">&#8474;</span></code> is typed <code class="docutils literal notranslate"><span class="pre">\rat</span></code> or <code class="docutils literal notranslate"><span class="pre">\Q</span></code>. Lean reduces <span class="math notranslate nohighlight">\(3.4^2\)</span> to
the rational number <span class="math notranslate nohighlight">\(289/25\)</span>.</p>
<div class="proof proof-type-problem" id="id9">

    <div class="proof-title">
        <span class="proof-type">Problem 2.2</span>
        
    </div><div class="proof-content">
<p>For each of the following expressions:</p>
<ul class="simple">
<li><p>Without Lean, evaluate the expression.</p></li>
<li><p>Verify your answer using the <code class="docutils literal notranslate"><span class="pre">#eval</span></code> command in Lean. Use the &#8216;simplest&#8217; type that
gives the expected anser. That is, prefer <span class="math notranslate nohighlight">\(\mathbb N\)</span> to  <span class="math notranslate nohighlight">\(\mathbb Z\)</span>
and prefer <span class="math notranslate nohighlight">\(\mathbb Z\)</span> to <span class="math notranslate nohighlight">\(\mathbb Q\)</span>.</p></li>
</ul>
<p>(i) <span class="math notranslate nohighlight">\((1-4)^5\)</span>, (ii) <span class="math notranslate nohighlight">\((1+4)^5\)</span>, (iii) <span class="math notranslate nohighlight">\(5/4 + 1/2\)</span>, (iv) <span class="math notranslate nohighlight">\(66/2\)</span>.</p>
</div></div><p>For proof, the most important type is <code class="docutils literal notranslate"><span class="pre">Prop</span></code>, the type of propositions.
Examples of propositions include <span class="math notranslate nohighlight">\(3 = 1 + 2\)</span>, <span class="math notranslate nohighlight">\(1 + 1 &lt; 10\)</span> and
&#8216;for every natural number <span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(n \ge 0\)</span>&#8217;.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/types.lean" target="_blank" tryitfile="../src/expressions/types.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="mi">3</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">2</span>
</pre></div>
</div>
</div><p>The code above gives output <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">:</span> <span class="pre">Prop</span></code>, showing that <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">2</span></code> is a proposition.</p>
<p>The proposition &#8216;for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(n + 1 &gt; 0\)</span>&#8217; is
displayed in Lean as <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">(n</span> <span class="pre">:</span> <span class="pre">&#8469;),</span> <span class="pre">n</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>. Type <code class="docutils literal notranslate"><span class="pre">\all</span></code> for <code class="docutils literal notranslate"><span class="pre">&#8704;</span></code>.</p>
<p>Likewise, &#8216;there exists a natural number
<span class="math notranslate nohighlight">\(m\)</span> such that <span class="math notranslate nohighlight">\(m + 2 = 5\)</span>&#8217; is written as <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">(m</span> <span class="pre">:</span> <span class="pre">&#8469;),</span> <span class="pre">m</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">=</span> <span class="pre">5</span></code>.
Here, <code class="docutils literal notranslate"><span class="pre">&#8707;</span></code> is typed <code class="docutils literal notranslate"><span class="pre">\ex</span></code>.</p>
<div class="proof proof-type-problem" id="id10">

    <div class="proof-title">
        <span class="proof-type">Problem 2.3</span>
        
    </div><div class="proof-content">
<p>For each of the following expressions:</p>
<ul class="simple">
<li><p>Without using Lean, determine the type of the expression.</p></li>
<li><p>Verify your answer using the <code class="docutils literal notranslate"><span class="pre">#check</span></code> Lean command.</p></li>
</ul>
<p>(i) <span class="math notranslate nohighlight">\(2 + 3\)</span>, (ii) <span class="math notranslate nohighlight">\(2 + 3 = 10\)</span>, (iii) &#8216;for all integers <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(2x = 10\)</span>&#8217;.</p>
</div></div><section id="id2">
<h3><span class="section-number">2.2.1. </span>Solutions<a class="headerlink" href="#id2" title="Permalink to this heading">&#61633;</a></h3>
<p>This section has solutions.
<a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/solutions/solutions_types.lean" target="_blank" tryitfile="../src/expressions/solutions/solutions_types.lean">
Go to solutions source</a>.</p>
</section>
</section>
<section id="the-root-of-a-parse-tree-in-lean">
<span id="index-3"></span><h2><span class="section-number">2.3. </span>The root of a parse tree in Lean<a class="headerlink" href="#the-root-of-a-parse-tree-in-lean" title="Permalink to this heading">&#61633;</a></h2>
<p>This project defines the command <code class="docutils literal notranslate"><span class="pre">#pp_app</span></code> that displays the root of a parse tree of
an expression.</p>
<p>For example, typing</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/root_of_parse_tree.lean" target="_blank" tryitfile="../src/expressions/root_of_parse_tree.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="bp">#</span><span class="n">pp_app</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="mi">3</span><span class="o">)</span>
</pre></div>
</div>
</div><p>gives the output <code class="docutils literal notranslate"><span class="pre">multiply</span></code>. This shows that <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">3</span></code> is an application of multiplication.</p>
<div class="proof proof-type-problem" id="id11">

    <div class="proof-title">
        <span class="proof-type">Problem 2.4</span>
        
    </div><div class="proof-content">
<p>For each of the following expressions:</p>
<ul class="simple">
<li><p>Without using Lean, determine of which operator the expression is an application.</p></li>
<li><p>Verify your answer using the <code class="docutils literal notranslate"><span class="pre">#pp_app</span></code> command in Lean.</p></li>
</ul>
<p>(i) <span class="math notranslate nohighlight">\(3 + 5 \times 5\)</span>, (ii) <span class="math notranslate nohighlight">\(7^{3 + 2}\)</span>, (iii) <span class="math notranslate nohighlight">\(3 + 2 = 10\)</span>, (iv) <span class="math notranslate nohighlight">\(10&lt;30\)</span>, (v) <span class="math notranslate nohighlight">\(5 \ne 6/2\)</span>, (vi) <span class="math notranslate nohighlight">\(5^3 \ge 2 + 3\)</span>.</p>
<p>If necessary, refer to Appendix <a class="reference internal" href="typing_lean_symbols.html#typing-lean-symbols"><span class="std std-ref">Typing Lean Symbols</span></a>.</p>
</div></div><section id="id3">
<h3><span class="section-number">2.3.1. </span>Solutions<a class="headerlink" href="#id3" title="Permalink to this heading">&#61633;</a></h3>
<p>This section has solutions.
<a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/solutions/solutions_root_of_parse_tree.lean" target="_blank" tryitfile="../src/expressions/solutions/solutions_root_of_parse_tree.lean">
Go to solutions source</a>.</p>
</section>
</section>
<section id="functions-in-lean">
<h2><span class="section-number">2.4. </span>Functions in Lean<a class="headerlink" href="#functions-in-lean" title="Permalink to this heading">&#61633;</a></h2>
<p>Here is the Lean definition of a function <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8484;</span></code> such that <span class="math notranslate nohighlight">\(f(x) := -x^2\)</span>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">&#8484;</span> <span class="o">:=</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">^</span><span class="mi">2</span>
</pre></div>
</div>
</div><p>The arrow <code class="docutils literal notranslate"><span class="pre">&#8594;</span></code> is typed <code class="docutils literal notranslate"><span class="pre">\r</span></code>.</p>
<p>To find the value of <code class="docutils literal notranslate"><span class="pre">f(10)</span></code>, we can use <code class="docutils literal notranslate"><span class="pre">#eval</span></code>, as below. This outputs <code class="docutils literal notranslate"><span class="pre">-100</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="n">f</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
</pre></div>
</div>
</div><p>The parentheses here serve no purpose: in Lean, function application is denoted by
space and has the highest order of precedence.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="n">f</span> <span class="mi">10</span>
</pre></div>
</div>
</div><p>The <cite>type</cite> of the function <code class="docutils literal notranslate"><span class="pre">f</span></code> is found by:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="n">f</span>
</pre></div>
</div>
</div><p>The type is <code class="docutils literal notranslate"><span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8484;</span></code>. However, the type of <code class="docutils literal notranslate"><span class="pre">f(5)</span></code> is <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="n">f</span> <span class="mi">5</span>
</pre></div>
</div>
</div><p>In the next problem, you&#8217;ll consider what happens if you try to apply <code class="docutils literal notranslate"><span class="pre">f</span></code>
to an integer rather than a natural number.</p>
<div class="proof proof-type-problem" id="id12">

    <div class="proof-title">
        <span class="proof-type">Problem 2.5</span>
        
            <span class="proof-title-name">(Applying <span class="math notranslate nohighlight">\(f\)</span> to an integer)</span>
        
    </div><div class="proof-content">
<p>Type</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8484;</span>
<span class="k">#check</span> <span class="n">f</span> <span class="n">y</span>
</pre></div>
</div>
<p>in Lean.</p>
<p>You&#8217;ll get a &#8216;type mismatch&#8217; error message, stating that term <code class="docutils literal notranslate"><span class="pre">y</span></code> has type
<code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> but is expected to have type <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code>. Can you explain this message?</p>
</div></div><p>This has been our first attempt at handling error messages.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Whether in Lean or any other computer system, the ability to understand
and handle error messages (and to minimise their occurrence!) is a vital
skill.</p>
<p>Moreover, many of the errors beginning students make in Lean are the same as
those they make in handwritten mathematics. By helping you to correct your
computer proofs, Lean will help you to become a better mathematician.</p>
<p>Learn more in the Appendix on <a class="reference internal" href="error_messages.html#error-messages"><span class="std std-ref">Error messages</span></a>.</p>
</div>
<p id="index-4">There are some subtleties with types. If <code class="docutils literal notranslate"><span class="pre">u</span></code> is a natural number and <code class="docutils literal notranslate"><span class="pre">y</span></code> is
an integer, Lean will not understand <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">+</span> <span class="pre">v</span></code>. It &#8216;sees&#8217; <code class="docutils literal notranslate"><span class="pre">u</span></code> and <code class="docutils literal notranslate"><span class="pre">+</span></code> and
then expects another natural number. However, Lean will understand <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">+</span> <span class="pre">u</span></code>.
After reading <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">+</span></code>, Lean expects an integer. Though <code class="docutils literal notranslate"><span class="pre">u</span></code> is not
of integer type, Lean is able to &#8216;coerce&#8217; <code class="docutils literal notranslate"><span class="pre">u</span></code> into an integer.</p>
<div class="proof proof-type-problem" id="id13">

    <div class="proof-title">
        <span class="proof-type">Problem 2.6</span>
        
            <span class="proof-title-name">(Which expressions are meaningful?)</span>
        
    </div><div class="proof-content">
<p>Suppose <span class="math notranslate nohighlight">\(V\)</span> is an abstract type equipped with an addition operator. For example,
<span class="math notranslate nohighlight">\(V\)</span> could be the type of pairs of natural number with <span class="math notranslate nohighlight">\((x_1, x_2) + (y_1, y_2)\)</span>
defined to be <span class="math notranslate nohighlight">\((x_1 + y_1, x_2 +y_2)\)</span>.</p>
<p>Suppose <span class="math notranslate nohighlight">\(g : \mathbb N \to V\)</span>. That is, <span class="math notranslate nohighlight">\(g\)</span> is a function from the natural numbers to <span class="math notranslate nohighlight">\(V\)</span>.</p>
<p>Suppose <span class="math notranslate nohighlight">\(u\)</span> and <span class="math notranslate nohighlight">\(v\)</span> are natural numbers and <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(z\)</span> have type <span class="math notranslate nohighlight">\(V\)</span>. Determine which of the
following expressions are meaningful. For each meaningful expression, give its type.
Check your answers in Lean.</p>
<p>(i) <span class="math notranslate nohighlight">\(u + v\)</span>, (ii) <span class="math notranslate nohighlight">\(y + z\)</span>, (iii) <span class="math notranslate nohighlight">\(g(u + v)\)</span>, (iv) <span class="math notranslate nohighlight">\(g(y + z)\)</span>,
(v) <span class="math notranslate nohighlight">\(u + g(u)\)</span>, (vi) <span class="math notranslate nohighlight">\(y + g(u)\)</span>, (vii) <span class="math notranslate nohighlight">\(g(u) + u\)</span>, (viii) <span class="math notranslate nohighlight">\(g(u) + y\)</span>.</p>
</div></div><section id="lambda-abstraction">
<span id="index-5"></span><h3><span class="section-number">2.4.1. </span>Lambda abstraction<a class="headerlink" href="#lambda-abstraction" title="Permalink to this heading">&#61633;</a></h3>
<p>Lambda abstractions are unnamed functions. For example <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x,</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">x</span></code> is the
function that doubles its input. More precisely, Lean assumes that quantities involved
in arithmetic operations are natural numbers (unless told otherwise). So this function
maps every natural number to twice its value, as a natural number. Here, <code class="docutils literal notranslate"><span class="pre">&#955;</span></code> is typed <code class="docutils literal notranslate"><span class="pre">\lam</span></code>.</p>
<p>We can see this by checking the type of the expression.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="bp">&#955;</span> <span class="n">x</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span>
</pre></div>
</div>
</div><p>This shows that <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x,</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">x</span></code> has type <code class="docutils literal notranslate"><span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8469;</span></code>, as expected. Rather than
using symbols, we can specify this function in English as &#8220;the abstraction of
(the natural number) <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">x</span></code> over (the natural number variable) <code class="docutils literal notranslate"><span class="pre">x</span></code>.&#8221;</p>
<p>Lambda abstractions, like all functions, can be <em>applied</em> to terms. Below, we
evaluate the application of <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x,</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">x</span></code> to <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="o">(</span><span class="bp">&#955;</span> <span class="n">x</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span> <span class="mi">5</span>
</pre></div>
</div>
</div><p>As expected, this gives <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
<p>Using type ascriptions, we can define a similar function, but one that takes its
natural number input to twice its value <cite>as an integer</cite>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="bp">&#955;</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">),</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">)</span>
</pre></div>
</div>
</div><p>The function above has type <code class="docutils literal notranslate"><span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8484;</span></code>. It is not the same function as that which returns
twice its natural number value <cite>as a natural number</cite>.</p>
<div class="proof proof-type-problem" id="id14">

    <div class="proof-title">
        <span class="proof-type">Problem 2.7</span>
        
    </div><div class="proof-content">
<p>Write a Lean expression that corresponds to the abstraction of the integer expression
<span class="math notranslate nohighlight">\(y ^2 + 8y\)</span> over the integer variable <span class="math notranslate nohighlight">\(y\)</span>. Evaulate the application of this
function to <span class="math notranslate nohighlight">\(-3\)</span>.</p>
</div></div><p>Any expression can be given a name. If desired, we can name lambda abstractions. We
do this through the <code class="docutils literal notranslate"><span class="pre">def</span></code> mechanism.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">p</span> <span class="o">:=</span> <span class="bp">&#955;</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">),</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">u</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">)</span>
</pre></div>
</div>
</div><p id="index-6">The named lambda abstraction <code class="docutils literal notranslate"><span class="pre">p</span></code> above is just another way to give a function definition.
It is the same as the function <code class="docutils literal notranslate"><span class="pre">p&#8322;</span></code> defined below (note <code class="docutils literal notranslate"><span class="pre">p&#8322;</span></code> can be written <code class="docutils literal notranslate"><span class="pre">p\2</span></code>).</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">p&#8322;</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">&#8484;</span> <span class="o">:=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">u</span>
</pre></div>
</div>
</div><p>As a final alternative, we can declare the type of a lambda abstraction before giving
its definition.
This removes the need to give type ascriptions in the lambda abstraction itself:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">p&#8323;</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8484;</span> <span class="o">:=</span> <span class="bp">&#955;</span> <span class="n">u</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">u</span>
</pre></div>
</div>
</div><p>Let&#8217;s get practice writing a function in different ways.</p>
<div class="proof proof-type-problem" id="id15">

    <div class="proof-title">
        <span class="proof-type">Problem 2.8</span>
        
    </div><div class="proof-content">
<p>Write a Lean function <span class="math notranslate nohighlight">\(h : \mathbb N \to \mathbb Z\)</span> so that <span class="math notranslate nohighlight">\(h(u) := u - 3\)</span>.
Do this in three ways, following the examples above for defining
the functions <span class="math notranslate nohighlight">\(p\)</span>, <span class="math notranslate nohighlight">\(p_2\)</span>, and <span class="math notranslate nohighlight">\(p_3\)</span>.</p>
</div></div><p>As a first example of <cite>proof</cite>, we&#8217;ll show the claims above regarding equality of <code class="docutils literal notranslate"><span class="pre">p</span></code>,
<code class="docutils literal notranslate"><span class="pre">p&#8322;</span></code> and <code class="docutils literal notranslate"><span class="pre">p&#8323;</span></code>.</p>
<p>To begin, we prove that <code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">=</span> <span class="pre">p&#8322;</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">p&#8322;</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>
</div>
</div><p>In the code above, <code class="docutils literal notranslate"><span class="pre">example</span></code> says to Lean, &#8220;I&#8217;m about to prove something&#8221;.
The text between the <code class="docutils literal notranslate"><span class="pre">:</span></code> and the <code class="docutils literal notranslate"><span class="pre">:=</span></code> specifies what we will prove. Here,
we will prove <code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">=</span> <span class="pre">p&#8322;</span></code>. The text after the <code class="docutils literal notranslate"><span class="pre">:=</span></code> is the proof, which in this
case is simply the word <code class="docutils literal notranslate"><span class="pre">rfl</span></code>. This word is short for &#8216;reflexivity of equals&#8217;, a
notion we will encounter in the next chapter. It is used to prove equality
of two objects that are definitionally equal.</p>
<div class="proof proof-type-problem" id="id16">

    <div class="proof-title">
        <span class="proof-type">Problem 2.9</span>
        
    </div><div class="proof-content">
<p>Prove that <span class="math notranslate nohighlight">\(p = p_3\)</span>.</p>
</div></div></section>
<section id="functions-and-variables">
<span id="index-7"></span><h3><span class="section-number">2.4.2. </span>Functions and variables<a class="headerlink" href="#functions-and-variables" title="Permalink to this heading">&#61633;</a></h3>
<p>The name of the &#8216;bound&#8217; variable <code class="docutils literal notranslate"><span class="pre">x</span></code> is (usually) irrelevant in a function definition such as</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">q</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">5</span> <span class="bp">+</span> <span class="n">x</span>
</pre></div>
</div>
</div><p>To illustrate this, I define a function that is syntactically identical to <code class="docutils literal notranslate"><span class="pre">q</span></code>, <cite>except</cite> for the
name of the bound variable.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">q&#8322;</span><span class="o">(</span><span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">5</span> <span class="bp">+</span> <span class="n">u</span>
</pre></div>
</div>
</div><p>We can show these functions are equal.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">q&#8322;</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>
</div>
</div><p>Now it&#8217;s your turn.</p>
<div class="proof proof-type-problem" id="id17">

    <div class="proof-title">
        <span class="proof-type">Problem 2.10</span>
        
    </div><div class="proof-content">
<p>Give the Lean definition of two functions <code class="docutils literal notranslate"><span class="pre">p</span></code> and <code class="docutils literal notranslate"><span class="pre">p&#8322;</span></code>, both from <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code>
to <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code>, where
<span class="math notranslate nohighlight">\(p(x) := x^2 + 5x + 2\)</span> and where <span class="math notranslate nohighlight">\(p_2\)</span> is the same except with <span class="math notranslate nohighlight">\(y\)</span> in place of <span class="math notranslate nohighlight">\(x\)</span>.</p>
<p>Use Lean to prove <code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">=</span> <span class="pre">p&#8322;</span></code>.</p>
</div></div><p>Equality of functions is (usually) preserved under changing the names of bound variables, but not
necessarily the names of the &#8216;free&#8217; variables. Suppose <span class="math notranslate nohighlight">\(a\)</span> and <span class="math notranslate nohighlight">\(b\)</span> are natural number constants.
If functions <span class="math notranslate nohighlight">\(t : \mathbb N \to \mathbb N\)</span> and <span class="math notranslate nohighlight">\(t_2 : \mathbb N \to \mathbb N\)</span> are defined by
<span class="math notranslate nohighlight">\(t(x) := a + x\)</span>
and <span class="math notranslate nohighlight">\(t_2(x) := b + x\)</span>, then <span class="math notranslate nohighlight">\(t\)</span> and <span class="math notranslate nohighlight">\(t_2\)</span> are not necessarily equal.</p>
<p>Here is a Lean implementation of the functions described above. For the moment, don&#8217;t concern
yourself with the meanings of <code class="docutils literal notranslate"><span class="pre">constants</span></code> and <code class="docutils literal notranslate"><span class="pre">noncomputable</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">t</span><span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">x</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">t&#8322;</span><span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">x</span>
</pre></div>
</div>
</div><div class="proof proof-type-problem" id="id18">

    <div class="proof-title">
        <span class="proof-type">Problem 2.11</span>
        
    </div><div class="proof-content">
<p>Type</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">t&#8322;</span> <span class="o">:</span> <span class="n">rfl</span>
</pre></div>
</div>
<p>and read the error message. In your own words, explain the error message.</p>
</div></div><p>The error message is: &#8220;type mismatch, term <code class="docutils literal notranslate"><span class="pre">rfl</span></code> has type <code class="docutils literal notranslate"><span class="pre">?m_2</span> <span class="pre">=</span> <span class="pre">?m_2</span></code> but is expected to
have type <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">t&#8322;</span></code>&#8221;.</p>
<p>As mentioned, <code class="docutils literal notranslate"><span class="pre">rfl</span></code> is used to prove equality of two terms that are definitionally equal.
More technically, <code class="docutils literal notranslate"><span class="pre">rfl</span></code> is a function that returns a proof of <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">x</span></code>. In Lean, to be
a term of type <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">x</span></code> is to be a proof of <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">x</span></code>.</p>
<p>This explains the phrase &#8220;term <code class="docutils literal notranslate"><span class="pre">rfl</span></code> as type <code class="docutils literal notranslate"><span class="pre">?m_2</span> <span class="pre">=</span> <span class="pre">?m_2</span></code>&#8221;.</p>
<p>We are trying to prove <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">t&#8322;</span></code>. That is, to give a term of type <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">t&#8322;</span></code>. But, as
<code class="docutils literal notranslate"><span class="pre">t</span></code> and <code class="docutils literal notranslate"><span class="pre">t&#8322;</span></code> are not definitionally equal, <code class="docutils literal notranslate"><span class="pre">rfl</span></code> does not return a term of type <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">t&#8322;</span></code>.</p>
<p>It&#8217;s time for a problem that involves changes both to bound and to free variables.</p>
<p>First we define a few constants and functions.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions.lean" target="_blank" tryitfile="../src/expressions/functions.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span> <span class="o">(</span><span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">f&#8321;</span><span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">w</span> <span class="bp">^</span> <span class="mi">2</span>

              <span class="kd">def</span> <span class="n">f&#8322;</span><span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">u</span> <span class="bp">^</span> <span class="mi">2</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">f&#8323;</span><span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">z</span> <span class="bp">^</span> <span class="mi">2</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">f&#8324;</span><span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">v</span> <span class="bp">*</span> <span class="n">w</span> <span class="bp">^</span> <span class="mi">2</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">f&#8325;</span><span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">v</span> <span class="bp">*</span> <span class="n">u</span> <span class="bp">^</span> <span class="mi">2</span>
</pre></div>
</div>
</div><div class="proof proof-type-problem" id="id19">

    <div class="proof-title">
        <span class="proof-type">Problem 2.12</span>
        
    </div><div class="proof-content">
<p>Which of the pairs of functions chosen from <span class="math notranslate nohighlight">\(f_1,\ldots,f_5\)</span> above are equal? Verify your answers
in Lean.</p>
</div></div></section>
<section id="id4">
<h3><span class="section-number">2.4.3. </span>Solutions<a class="headerlink" href="#id4" title="Permalink to this heading">&#61633;</a></h3>
<p>This section has solutions.
<a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/solutions/solutions_functions.lean" target="_blank" tryitfile="../src/expressions/solutions/solutions_functions.lean">
Go to solutions source</a>.</p>
</section>
</section>
<section id="predicates">
<span id="index-8"></span><h2><span class="section-number">2.5. </span>Predicates<a class="headerlink" href="#predicates" title="Permalink to this heading">&#61633;</a></h2>
<p>Below is the definition of a predicate. It&#8217;s simply a function from <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> to <code class="docutils literal notranslate"><span class="pre">Prop</span></code>
that takes each natural number <code class="docutils literal notranslate"><span class="pre">x</span></code> to the proposition <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">5</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/predicates.lean" target="_blank" tryitfile="../src/expressions/predicates.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">P</span><span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">5</span>
</pre></div>
</div>
</div><p>As usual, we can find the type of <code class="docutils literal notranslate"><span class="pre">P</span></code> using</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/predicates.lean" target="_blank" tryitfile="../src/expressions/predicates.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span> <span class="n">P</span>
</pre></div>
</div>
</div><p>This shows <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">:</span> <span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code>.
As <code class="docutils literal notranslate"><span class="pre">P</span></code> is a function on the type <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code>, it can be applied to natural numbers. We show
<code class="docutils literal notranslate"><span class="pre">P(2)</span></code> equals <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">&gt;</span> <span class="pre">5</span></code> in Lean:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/predicates.lean" target="_blank" tryitfile="../src/expressions/predicates.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">P</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">&gt;</span> <span class="mi">5</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>
</div>
</div><p>Note we haven&#8217;t proved that <span class="math notranslate nohighlight">\(2 &gt; 5\)</span> (which would be impossible). Rather, we have proved that
<span class="math notranslate nohighlight">\(P(2)\)</span> is <span class="math notranslate nohighlight">\(2 &gt; 5\)</span>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>In school mathematics, functions typically return numeric values. It can take time
to get used to functions that return propositions. Here, <span class="math notranslate nohighlight">\(P(2)\)</span>
is the proposition <span class="math notranslate nohighlight">\(2 &gt; 5\)</span>. It is not a number!</p>
</div>
<p>With <span class="math notranslate nohighlight">\(P\)</span> as above, <span class="math notranslate nohighlight">\(P(2)\)</span> is the false proposition <span class="math notranslate nohighlight">\(2 &gt; 5\)</span> and <span class="math notranslate nohighlight">\(P(6)\)</span> is the true proposition
<span class="math notranslate nohighlight">\(6 &gt; 5\)</span>.</p>
<p>In  the next problem, you will construct a predicate.</p>
<div class="proof proof-type-problem" id="id20">

    <div class="proof-title">
        <span class="proof-type">Problem 2.13</span>
        
    </div><div class="proof-content">
<p>In Lean, define a predicate <code class="docutils literal notranslate"><span class="pre">Q</span></code> on the type <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> so that <code class="docutils literal notranslate"><span class="pre">Q(y)</span></code> means <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">+</span> <span class="pre">5</span> <span class="pre">=</span> <span class="pre">12</span></code>.
Prove that <code class="docutils literal notranslate"><span class="pre">Q(-3)</span></code> equals <code class="docutils literal notranslate"><span class="pre">-3</span> <span class="pre">+</span> <span class="pre">5</span> <span class="pre">=</span> <span class="pre">12</span></code>.</p>
</div></div><p>We can define predicates that take more than one input. The predicate <code class="docutils literal notranslate"><span class="pre">T</span></code> below is defined
so that <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">x</span> <span class="pre">y</span></code> means <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span> <span class="pre">&lt;</span> <span class="pre">7</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/predicates.lean" target="_blank" tryitfile="../src/expressions/predicates.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">T</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="mi">7</span>
</pre></div>
</div>
</div><p>We prove below that <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">(-3)</span> <span class="pre">(5)</span></code> means <code class="docutils literal notranslate"><span class="pre">-3</span> <span class="pre">+</span> <span class="pre">5</span> <span class="pre">&lt;</span> <span class="pre">7</span></code>. Here, <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">(-3)</span> <span class="pre">(5)</span></code> is what we might
write in English-language mathematics as <span class="math notranslate nohighlight">\(T(-3,5)\)</span>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/predicates.lean" target="_blank" tryitfile="../src/expressions/predicates.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">T</span> <span class="o">(</span><span class="bp">-</span><span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="mi">5</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">-</span><span class="mi">3</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">&lt;</span> <span class="mi">7</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>
</div>
</div><div class="proof proof-type-problem" id="id21">

    <div class="proof-title">
        <span class="proof-type">Problem 2.14</span>
        
    </div><div class="proof-content">
<p>Prove that <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">(500)</span> <span class="pre">(-100)</span></code> equals <code class="docutils literal notranslate"><span class="pre">500</span> <span class="pre">+</span> <span class="pre">(-100)</span> <span class="pre">&lt;</span> <span class="pre">7</span></code>.</p>
</div></div><section id="id5">
<h3><span class="section-number">2.5.1. </span>Solutions<a class="headerlink" href="#id5" title="Permalink to this heading">&#61633;</a></h3>
<p>This section has solutions.
<a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/solutions/solutions_predicates.lean" target="_blank" tryitfile="../src/expressions/solutions/solutions_predicates.lean">
Go to solutions source</a>.</p>
</section>
</section>
<section id="introduction-to-tactics">
<h2><span class="section-number">2.6. </span>Introduction to tactics<a class="headerlink" href="#introduction-to-tactics" title="Permalink to this heading">&#61633;</a></h2>
<p id="index-9">In this important section, you&#8217;ll learn about Lean <cite>tactics</cite>, these being tools for writing proofs
interactively.</p>
<p>This is also the first section in which we&#8217;ll import the Lean code from a previous section. To do
this, we insert an <code class="docutils literal notranslate"><span class="pre">import</span></code> statement at the beginning of the file.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/tactics.lean" target="_blank" tryitfile="../src/expressions/tactics.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">expressions.predicates</span>
</pre></div>
</div>
</div><p>In the previous section, we defined a predicate <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">:</span> <span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code> so that <code class="docutils literal notranslate"><span class="pre">P(x)</span></code> means <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">5</span></code>.
By importing <code class="docutils literal notranslate"><span class="pre">expressions.predicates</span></code>, we can access <code class="docutils literal notranslate"><span class="pre">P</span></code> in this section.</p>
<p>Below, we <cite>prove</cite> <code class="docutils literal notranslate"><span class="pre">P(6)</span></code> in Lean.</p>
<div class="dropdown admonition">
<p class="admonition-title">What if the code below gives an error message?</p>
<p>If the code below produces an error message, you may have changed the defintion of <cite>P</cite> in
Lean file for the previous section. Go back to that section and restore the definition.</p>
</div>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/tactics.lean" target="_blank" tryitfile="../src/expressions/tactics.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">P</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">show</span> <span class="mi">6</span> <span class="bp">&gt;</span> <span class="mi">5</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><section id="tactic-blocks">
<h3><span class="section-number">2.6.1. </span>Tactic blocks<a class="headerlink" href="#tactic-blocks" title="Permalink to this heading">&#61633;</a></h3>
<p id="index-10">In the proof above, the words <code class="docutils literal notranslate"><span class="pre">begin</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> denote the start and end of a &#8216;tactic block&#8217;.</p>
<p>Each of the lines within the tactic block uses a <cite>tactic</cite>. Here, we use the <code class="docutils literal notranslate"><span class="pre">show</span></code> and
<code class="docutils literal notranslate"><span class="pre">norm_num</span></code> tactics. Each tactic line ends with a comma.</p>
<p>In the Lean editor pane, locate the code corresponding to the example above. Click anywhere within
the tactic block (anywhere after the <code class="docutils literal notranslate"><span class="pre">begin</span></code> and before the <code class="docutils literal notranslate"><span class="pre">end</span></code>). The Infoview pane will
show the &#8216;tactic state&#8217;.</p>
<p id="index-11">The tactic state shows the <cite>goal</cite> at any given point in the proof. The goal consiststs of (1)
the <cite>context</cite> (the set of hypotheses) and (2) the <cite>target</cite> (that which is to be proved).</p>
<p>In this simple proof, there are no hypotheses. The target is marked with the syymbol <code class="docutils literal notranslate"><span class="pre">&#8866;</span></code>, which
is read &#8216;to prove&#8217;.</p>
<p>At the start of the proof (just after the <code class="docutils literal notranslate"><span class="pre">begin</span></code>), the target is to prove <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">6</span></code>.
After the line <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">6</span> <span class="pre">&gt;</span> <span class="pre">5</span></code>, the target is to prove <code class="docutils literal notranslate"><span class="pre">6</span> <span class="pre">&gt;</span> <span class="pre">5</span></code>.
After the <code class="docutils literal notranslate"><span class="pre">norm_num</span></code> line, the tactic state shows &#8216;goals accomplished&#8217;, indicating that
the proof is complete.</p>
<div class="proof proof-type-problem" id="id22">

    <div class="proof-title">
        <span class="proof-type">Problem 2.15</span>
        
    </div><div class="proof-content">
<p>All the tactics used in this book are described in the Appendix <a class="reference internal" href="tactics.html#tactics"><span class="std std-ref">Tactics</span></a>.</p>
<p>Read the appendix items on the <code class="docutils literal notranslate"><span class="pre">show</span></code> and <code class="docutils literal notranslate"><span class="pre">norm_num</span></code> tactics and come back here
(the <cite>Introduction to tactics</cite> section in the <cite>Expressions</cite> chapter).
After reading those items, write an English-language explanation of how the tactic proof
above works.</p>
</div></div></section>
<section id="who-s-sorry-now">
<h3><span class="section-number">2.6.2. </span>Who&#8217;s sorry now?<a class="headerlink" href="#who-s-sorry-now" title="Permalink to this heading">&#61633;</a></h3>
<p id="index-12">The best way to tackle a problem is to break it down into smaller manageable pieces and to apply
the same decomposition process recursively to each piece until what is left is trivial.</p>
<p>You can apply this idea to writing a proof. Start with a proof that is <cite>structurally correct</cite> but
has missing pieces. Recursively flesh out the gaps in the proof while ensuring, at each stage,
that the proof has no logical flaws.</p>
<p>Lean provides a mechanism for writing proofs in a piecewise fashion&#8212;the <code class="docutils literal notranslate"><span class="pre">sorry</span></code> tactic.
This tactic has the effect of saying to Lean, &#8220;I don&#8217;t know what to do here, but I&#8217;ll get
back to it later.&#8221; In more technical language, it &#8220;closes the current goal&#8221;. Using <code class="docutils literal notranslate"><span class="pre">sorry</span></code>
emits a warning message in the Infoview pane, reminding you that the proof is not complete.</p>
<p>However, even if you use <code class="docutils literal notranslate"><span class="pre">sorry</span></code>, if any part of the proof is incorrect, Lean will give an
error message. Thus, <code class="docutils literal notranslate"><span class="pre">sorry</span></code>  is used to verify that your proof is correct, albeit incomplete.</p>
<div class="proof proof-type-problem" id="id23">

    <div class="proof-title">
        <span class="proof-type">Problem 2.16</span>
        
    </div><div class="proof-content">
<p>Below is an incomplete proof of <code class="docutils literal notranslate"><span class="pre">P(10)</span></code>, where <code class="docutils literal notranslate"><span class="pre">P</span></code> is the predicate defined previously
by <code class="docutils literal notranslate"><span class="pre">P(x)</span> <span class="pre">:=</span> <span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">5</span></code>.</p>
<ul class="simple">
<li><p>Observe that Lean emits an orange warning in the Infoview pane (under &#8220;All
messages&#8221;) to indicate that the example
uses <code class="docutils literal notranslate"><span class="pre">sorry</span></code>.</p></li>
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">sorry</span></code> line. Now Lean gives an error message telling you,
&#8220;there are unsolved goals&#8221;. This means the proof is incomplete.</p></li>
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">sorry</span></code>. Don&#8217;t forget the comma at the end of the line!</p></li>
<li><p>Change the <code class="docutils literal notranslate"><span class="pre">show</span></code> line to something incorrect, such as <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">10</span> <span class="pre">&gt;</span> <span class="pre">10</span></code>. Now Lean
gives the error message &#8220;show tactic failed&#8221;. This means that your show line does not
accurately restate the target.</p></li>
<li><p>Change the <code class="docutils literal notranslate"><span class="pre">show</span></code> line back to what it should be. Complete the proof.</p></li>
</ul>
</div></div><div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/tactics.lean" target="_blank" tryitfile="../src/expressions/tactics.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">P</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">show</span> <span class="mi">10</span> <span class="bp">&gt;</span> <span class="mi">5</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>You&#8217;ve just encountered two error messages. Understanding how to deal with errors in your proofs
is a fundamental skill. You can read more about error messages in the Appendix
<a class="reference internal" href="error_messages.html#error-messages"><span class="std std-ref">Error messages</span></a>.</p>
</section>
<section id="id6">
<h3><span class="section-number">2.6.3. </span>Solutions<a class="headerlink" href="#id6" title="Permalink to this heading">&#61633;</a></h3>
<p>This section has solutions.
<a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/solutions/solutions_tactics.lean" target="_blank" tryitfile="../src/expressions/solutions/solutions_tactics.lean">
Go to solutions source</a>.</p>
</section>
</section>
<section id="functions-and-predicates-of-many-variables">
<h2><span class="section-number">2.7. </span>Functions and predicates of many variables<a class="headerlink" href="#functions-and-predicates-of-many-variables" title="Permalink to this heading">&#61633;</a></h2>
<p>Let&#8217;s dig a little deeper into how Lean treats functions of many variables.</p>
<p>Consider a function <span class="math notranslate nohighlight">\(f\)</span> defined so that <span class="math notranslate nohighlight">\(f(x,y) := 2x + y\)</span>, where <span class="math notranslate nohighlight">\(x\)</span> is an integer
and <span class="math notranslate nohighlight">\(y\)</span> is a natural number. In Lean, we might write this as:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions_and_predicates_of_many_variables.lean" target="_blank" tryitfile="../src/expressions/functions_and_predicates_of_many_variables.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span>
</pre></div>
</div>
</div><p>We&#8217;ve already seen that every function has a type. So what is the type of <code class="docutils literal notranslate"><span class="pre">f</span></code>?</p>
<div class="proof proof-type-problem" id="id24">

    <div class="proof-title">
        <span class="proof-type">Problem 2.17</span>
        
    </div><div class="proof-content">
<p>Use the <code class="docutils literal notranslate"><span class="pre">#check</span></code> command to find the type of <code class="docutils literal notranslate"><span class="pre">f</span></code>.</p>
</div></div><p>If you did the problem above, you&#8217;ll have received the message:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">&#8484;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8484;</span>
</pre></div>
</div>
<p>Lean has omitted brackets in this expression. In full, the type of <code class="docutils literal notranslate"><span class="pre">f</span></code> is:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="n">&#8484;</span> <span class="bp">&#8594;</span> <span class="o">(</span><span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8484;</span><span class="o">)</span>
</pre></div>
</div>
<p>This means <code class="docutils literal notranslate"><span class="pre">f</span></code> is a function that takes an input of type <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> and returns an output of
type <code class="docutils literal notranslate"><span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8484;</span></code>. But a term of type <code class="docutils literal notranslate"><span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8484;</span></code> is a function from <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> to <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code>. Thus, <code class="docutils literal notranslate"><span class="pre">f</span></code>
takes an integer and returns a <cite>function</cite> from <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> to <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code>.</p>
<div class="proof proof-type-problem" id="id25">

    <div class="proof-title">
        <span class="proof-type">Problem 2.18</span>
        
    </div><div class="proof-content">
<p>Use the <code class="docutils literal notranslate"><span class="pre">#check</span></code> command to verify that <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">10</span></code> has type <code class="docutils literal notranslate"><span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8484;</span></code>.</p>
</div></div><p>Let&#8217;s name <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">10</span></code>. We&#8217;ll call it <code class="docutils literal notranslate"><span class="pre">g</span></code>, using a <code class="docutils literal notranslate"><span class="pre">def</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions_and_predicates_of_many_variables.lean" target="_blank" tryitfile="../src/expressions/functions_and_predicates_of_many_variables.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">g</span> <span class="o">:=</span> <span class="n">f</span> <span class="mi">10</span>
</pre></div>
</div>
</div><p>We&#8217;ve determined that <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">:</span> <span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8484;</span></code> is a function. So we should be able to compute with it.
Let&#8217;s show that <span class="math notranslate nohighlight">\(g(7) = 27\)</span>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions_and_predicates_of_many_variables.lean" target="_blank" tryitfile="../src/expressions/functions_and_predicates_of_many_variables.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">g</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">27</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">show</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">10</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">7</span> <span class="bp">=</span> <span class="mi">27</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>If the <code class="docutils literal notranslate"><span class="pre">show</span></code> statement looks a bit odd, it&#8217;s because Lean treats numerals as natural numbers
unless it has reason not do. The type ascription <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">:</span> <span class="pre">&#8484;</span></code> is needed so Lean knows we&#8217;re working
with the integer <code class="docutils literal notranslate"><span class="pre">10</span></code> instead of the natural number <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
<p>If we wrote <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">10</span> <span class="pre">+</span> <span class="pre">7</span> <span class="pre">=</span> <span class="pre">27</span></code> instead, we would receive a &#8220;show tactic failed&#8221; error.</p>
<div class="proof proof-type-problem" id="id26">

    <div class="proof-title">
        <span class="proof-type">Problem 2.19</span>
        
    </div><div class="proof-content">
<p>By adpating the proof above, prove that <code class="docutils literal notranslate"><span class="pre">g(12)</span> <span class="pre">=</span> <span class="pre">32</span></code>.</p>
</div></div><p>Predicates of many variables are really no different.
If I define a predicate <span class="math notranslate nohighlight">\(P\)</span> by <span class="math notranslate nohighlight">\(P(x, y) = 5x + y &lt; 2\)</span>,
where <span class="math notranslate nohighlight">\(x\)</span> is an integer and <span class="math notranslate nohighlight">\(y\)</span> is a natural number, then
<span class="math notranslate nohighlight">\(P\)</span> is a function of type <code class="docutils literal notranslate"><span class="pre">&#8484;</span> <span class="pre">&#8594;</span> <span class="pre">(&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">Prop)</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/functions_and_predicates_of_many_variables.lean" target="_blank" tryitfile="../src/expressions/functions_and_predicates_of_many_variables.lean">
Go to source</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">P</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">5</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="mi">2</span>

<span class="k">#check</span> <span class="n">P</span>
</pre></div>
</div>
</div><div class="proof proof-type-problem" id="id27">

    <div class="proof-title">
        <span class="proof-type">Problem 2.20</span>
        
    </div><div class="proof-content">
<p>Suppose <span class="math notranslate nohighlight">\(Q\)</span> is a predicate given by <span class="math notranslate nohighlight">\(Q(u, v) := v^2 + u = 10\)</span>,
where <span class="math notranslate nohighlight">\(u\)</span> is a natural number and <span class="math notranslate nohighlight">\(v\)</span> is an integer.</p>
<ul class="simple">
<li><p>What is the type of <span class="math notranslate nohighlight">\(Q\)</span>?</p></li>
<li><p>Give a Lean definition of <span class="math notranslate nohighlight">\(Q\)</span> and thereby check your answer to
the first part of this question.</p></li>
</ul>
</div></div><section id="id7">
<h3><span class="section-number">2.7.1. </span>Solutions<a class="headerlink" href="#id7" title="Permalink to this heading">&#61633;</a></h3>
<p>This section has solutions.
<a href="https://github.com/GihanMarasinghaOrg/modern_maths_lean/tree/main/src/expressions/solutions/solutions_functions_and_predicates_of_many_variables.lean" target="_blank" tryitfile="../src/expressions/solutions/solutions_functions_and_predicates_of_many_variables.lean">
Go to solutions source</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="01_Introduction.html" class="btn btn-neutral float-left" title="1. Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="typing_lean_symbols.html" class="btn btn-neutral float-right" title="Typing Lean symbols" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Gihan Marasingha.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>